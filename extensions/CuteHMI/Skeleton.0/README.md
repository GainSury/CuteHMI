# CuteHMI - Skeleton

This is a sample extension skeleton generated by `ExtensionSkeleton.qbs`. It can be used as a base for implementing custom
extensions.

## Directories

Directory structure of extensions follows standard QML extensions scheme. Directory name of the extension defines fully qualified
extension __name__ denoted as __VendorName.ExtensionName.MajorVersion__. Therefore this extension is named `CuteHMI.Skeleton.0`.

Fully qualified __name__ consists of __base name__ (`CuteHMI.Skeleton`) and __major version suffix__ (`.0`). __Base name__ consists
of two parts: __vendor name__ (`CuteHMI`) and __extension name__ (`Skeleton`). It is allowed to omit __extension name__ for a single
extension from a specific vendor.

Extension directories follow camel-case (PascalCase) rules in order to remain consistent with QML extension naming convention used
by Qt. On the other hand following this convention within C++ would be inconvenient in many places, so compromises have been made.
Sometimes semantic members of extension directory name are lowercased. To express such intention, a pattern
__VendorName.ExtensionName.MajorVersion__ will be transformed according to the intention (i.e. __vendor name__ represents lowercased
__VendorName__).

Typically each extension will have directory structure similar to this one.

- `include` - public header files (available to other modules).
    - __vendor name__ - `cutehmi` should be renamed to match vendor name.
        - __extension name__ - `skeleton` should be renamed to match extension name.
            - `internal` - some headers need to be publicly available, but they are implementation detail. This directory is for
            such files.
- `src` - private header files and implementation.
    - __vendor name__ - `cutehmi` should be renamed to match vendor name.
        - __extension name__ - `skeleton` should be renamed to match extension name.
            - `internal` - corresponds with `internal` subdirectory inside `include` directory.
- `tests` - Tests.
- `doc` - Documentation related files.
- `dev` - Development notes.

To keep things in order and avoid naming conflicts, C++ namespaces should reflect above directory structure within `include` and
`src` directories.

## Creating custom extension

One way to boost the process of creating an extension is to copy the contents of CuteHMI.Skeleton and modify them.

Less tedious way of doing this is to use `ExtensionSkeleton.qbs` to generate the files. The process can be reduced to following
tasks.
- Create an extension directory.
- Copy `Skeleton.0.qbs` to the extension directory, rename it to match extension name. Modify its contents.
- Tell Qbs to build `ExtensionSkeleton.qbs`.
    - In a console, `cd` to `CuteHMI` top level directory.
    - Create temporary build directory outside of the top level CuteHMI directory: `mkdir ../build-temp`.
    - Execute Qbs: `qbs build -f ../CuteHMI/ExtensionSkeleton.qbs --no-install -p ExtensionSkeleton products.CuteHMI.2.type:[] products.ExtensionSkeleton.extension:VendorName.ExtensionName.0  products.VendorName.ExtensionName.0.type:[]`
    Replace VendorName and ExtensionName to match names of the extension.
    - Delete temporary build directory.

If you haven't used Qbs from command line you may need to configure toolchains, Qt versions, specify Qbs profile or set up default
profile. Refer to [Qbs documentation](https://doc.qt.io/qbs/qt-versions.html) on how to do this.

Project `ExtensionSkeleton.qbs` can be also opened from QtCreator. You can simply locate the string
`property string extension: "CuteHMI.Skeleton.0"` and temporarily modify it to match your extenions. This is probably least
intrusive, but most straightforward way to generate skeleton for an extension. QtCreator also allows you to modify this property
through `Properties:` box in the `Projects` mode.
